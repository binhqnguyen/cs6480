#!/bin/bas
#preference: http://www.howtoforge.com/how-to-install-kvm-and-libvirt-on-centos-6.2-with-bridged-networking

#Run this on NC node 

echo "Removing kvm libvirt ..."
sudo yum erase -y kvm libvir

echo "Installing kvm libvirt..."
sudo yum install kvm libvirt

echo "Updating packages ..."
sudo yum update libvirt kvm
yum info libvirt
yum info qemu-kvm

echo "Restarting libvirt ..."
sudo service libvirtd restart

echo "Verifying kvm module is loaded ..."
arc=$(lsmod | grep kvm)
if [ "$arc" != *kvm* ]; then 
	echo "Opps, there might be something wrong withlsmod | grep kvm ...."
fi

echo "Checking libvirtd status ..."
service libvirtd status

echo "Reinstall eucalyptus on NC node ..."
./euca.install.ncnode

